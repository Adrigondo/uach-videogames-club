using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class ExplotaibleBlock : MonoBehaviour
{
    Level level;
    SpriteRenderer spriteRenderer;
    public float minThreshold = 0.2f; // Minimum threshold for color components
    public float maxThreshold = 0.8f; // Maximum threshold for color components

    // Start is called before the first frame update
    void Start()
    {
        level = GetComponentInParent<Level>();
        spriteRenderer = GetComponent <SpriteRenderer>();
        if (spriteRenderer != null)
        {
            // Generate a random color while avoiding colors close to black and white
            Color randomColor;
            do
            {
                randomColor = new Color(Random.Range(minThreshold, maxThreshold),
                                       Random.Range(minThreshold, maxThreshold),
                                       Random.Range(minThreshold, maxThreshold),
                                       1.0f);
            } while (IsColorCloseToBlackOrWhite(randomColor));

            // Assign the random color to the SpriteRenderer
            spriteRenderer.color = randomColor;
        }
        else
        {
            Debug.LogWarning("SpriteRenderer component not found on this GameObject.");
        }

    }

    // Update is called once per frame
    void Update()
    {
        
    }

    public void OnHit()
    {
        level.BlockDestroyed();
        gameObject.SetActive(false);
        Destroy(gameObject);
    }

    // Check if the color is close to black or white
    private bool IsColorCloseToBlackOrWhite(Color color)
    {
        return color.r < minThreshold && color.g < minThreshold && color.b < minThreshold ||
               color.r > maxThreshold && color.g > maxThreshold && color.b > maxThreshold;
    }
}
